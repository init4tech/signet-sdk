use crate::contracts::counter::Counter;
use alloy::{
    primitives::{bytes, Address, Bytes},
    providers::Provider,
};

/// A test address for the Revert contract, which will be pre-deployed in
/// test EVMs.
pub const REVERT_TEST_ADDRESS: Address = Address::repeat_byte(0x50);

/// Revert deploycode for testing purposes.
pub const REVERT_DEPLOY_CODE: Bytes = bytes!("0x608060405234601957600e601d565b60c76028823960c790f35b6023565b60405190565b5f80fdfe608060405234156073576013565b60405190565b5f80fd5b60209181520190565b5f7f5265766572742063616c6c656400000000000000000000000000000000000000910152565b6052600d6020926017565b6059816020565b0190565b60709060208101905f8183039101526047565b90565b6079600d565b62461bcd60e51b815280608d60048201605d565b0390fdfea2646970667358221220ca26ecb1412cc6e87fe99712d1085a242349863e03e3e43ef6ee7dde7a3478cc64736f6c634300081a0033");

/// Revert bytecode for testing purposes.
pub const REVERT_BYTECODE: Bytes = bytes!(
  "0x608060405234156073576013565b60405190565b5f80fd5b60209181520190565b5f7f5265766572742063616c6c656400000000000000000000000000000000000000910152565b6052600d6020926017565b6059816020565b0190565b60709060208101905f8183039101526047565b90565b6079600d565b62461bcd60e51b815280608d60048201605d565b0390fdfea2646970667358221220ca26ecb1412cc6e87fe99712d1085a242349863e03e3e43ef6ee7dde7a3478cc64736f6c634300081a0033");

/// Get an instance of the pre-deployed Counter contract.
pub fn revert<P: Provider>(p: P) -> Counter::CounterInstance<P> {
    Counter::CounterInstance::new(REVERT_TEST_ADDRESS, p)
}
